<!--
 * ========================LICENSE_START=================================
 * Copyright (C) 2025 Regione Piemonte
 * SPDX-FileCopyrightText: Copyright 2025 | Regione Piemonte
 * SPDX-License-Identifier: EUPL-1.2
 * =========================LICENSE_END==================================
 -->
<div class="table-container mt-3">
    <p-table #dt dataKey="id" [value]="listaSpostamentiPrec" styleClass="p-datatable-customers" [rowHover]="true"
        [rows]="10" [showCurrentPageReport]="true" [rowsPerPageOptions]="[10,25,50]" [loading]="false"
        responsiveLayout="scroll" [paginator]="true"
        currentPageReportTemplate="{first} di {last}, su {totalRecords} righe" [sortOrder]="-1">
        <ng-template pTemplate="header">
            <tr>
                <th>
                    <div class="flex justify-content-between align-items-center">
                        Data
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-between align-items-center">
                        Ora
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-between align-items-center">
                        Servizio
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-between align-items-center">
                        Sede
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-between align-items-center">
                        Operatore
                    </div>
                </th>
                <th>
                    <div class="flex justify-content-between align-items-center">
                        Modalità erogazione
                    </div>
                </th>
                <th style="width: auto">Azioni</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-item>
            <tr class="p-selectable-row">
                <td>
                    <span class="p-column-title">Data</span>
                    {{item?.dataIncontro | date: 'dd/MM/yyyy' }}
                </td>
                <td>
                    <span class="p-column-title">Ora</span>
                    {{item?.oraIncontro}}
                </td>
                <td>
                    <span class="p-column-title">Servizio</span>
                    {{item?.desSilwebTIncServizi}}
                </td>
                <td>
                    <span class="p-column-title">Sede</span>
                    {{item?.desSedeCpiIncontro}}
                </td>
                <td>
                    <span class="p-column-title">Operatore</span>
                    {{item?.idOperatore}} {{item?.cognomeOperatore}} {{item?.nomeOperatore}}
                </td>
                <td>
                    <span class="p-column-title">Modalità di erogazione</span>
                    {{item?.desSilTInContattoErogaz}}
                </td>
                <td class="col-md-1" style="white-space: nowrap;">
                    <a style="color: #016CB4" (click)="spostamentoSelected = item"
                        aria-label="Azione: visualizzare appuntamento" title="Visualizzare appuntamento" tabindex="0"><i
                            class="fas fa-eye"></i></a>
                </td>
            </tr>
        </ng-template>
        <ng-template *ngIf="listaSpostamentiPrec.length === 0" pTemplate="emptymessage">
            <tr>
                <td colspan="7" class=" text-center no-results-warning">
                    Non ci sono dati
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>
<div *ngIf="spostamentoSelected" class="mt-3">
    <pslpwcl-dati-prenotazione [servizio]="servizio" [incontro]="spostamentoSelected"></pslpwcl-dati-prenotazione>
    <button (click)="spostamentoSelected = null" type="button" class="btn btn-outline-secondary btn-sm">
        INDIETRO
    </button>
</div>