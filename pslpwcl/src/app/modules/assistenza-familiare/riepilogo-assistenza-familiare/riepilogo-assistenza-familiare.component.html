<!--
 * ========================LICENSE_START=================================
 * Copyright (C) 2025 Regione Piemonte
 * SPDX-FileCopyrightText: Copyright 2025 | Regione Piemonte
 * SPDX-License-Identifier: EUPL-1.2
 * =========================LICENSE_END==================================
 -->
<div class="container">

    <ng-container>
        <div class="mt-5">
            <h3>Ricerca personale per assistenza familiare</h3>
            <div class="row mt-5">
                <p-table #dt dataKey="id" [value]="annunciResponseList" styleClass="p-datatable-customers"
                    [rowHover]="true" [rows]="10" [showCurrentPageReport]="true" [rowsPerPageOptions]="[10,25,50]"
                    [loading]="false" responsiveLayout="scroll" [paginator]="true"
                    currentPageReportTemplate="{first} di {last}, su {totalRecords} righe" [sortField]="'dataInvio'"
                    [sortOrder]="-1">

                    <ng-template pTemplate="header">
                        <tr>
                            <th>
                                <div class="flex justify-content-between align-items-center">
                                    Data richiesta
                                </div>
                            </th>
                            <th>
                                <div class="flex justify-content-between align-items-center">
                                    CPI di intermediazione
                                </div>
                            </th>
                            <th>
                                <div class="flex justify-content-between align-items-center">
                                    Profilo
                                </div>
                            </th>
                            <th>
                                <div class="flex justify-content-between align-items-center">
                                    Stato annuncio
                                </div>
                            </th>
                            <th style="width: auto">Azioni</th>
                        </tr>
                    </ng-template>

                    <ng-template pTemplate="body" let-el>
                        <tr class="p-selectable-row">
                            <td>
                                <span class="p-column-title">Data richiesta</span>
                                {{el.dataStato | date: 'dd/MM/yyyy' }}
                            </td>
                            <td>
                                <span class="p-column-title">CPI di intermediazione</span>
                                {{el.dsIntermediario}}
                            </td>
                            <td>
                                <span class="p-column-title">Profilo</span>
                                {{el.qualifica}}
                            </td>
                            <td>
                                <span class="p-column-title">Stato annuncio</span>
                                {{getStatoAnnuncio(el)}}
                            </td>
                            <td>
                                <a *ngIf="el.stato === 'Preso in carico' || el.stato === 'Condiviso'"
                                    (click)="onGoToCandidati(el.idAnnuncio)" tabindex="0" style="color: #016CB4"
                                    aria-label="Azione: visualizzare candidati" title="Visualizzare candidati">
                                    <i class="fas fa-user-tie"></i>
                                </a>
                                <a tabindex="0" style="color: #016CB4" (click)="onGoToAnnuncio(el.idAnnuncio)"
                                    aria-label="Azione: visualizzare dettaglio richiesta"
                                    title="Visualizzare dettaglio richiesta">
                                    <i class="fas fa-eye"></i>
                                </a>
                            </td>
                        </tr>
                    </ng-template>

                    <ng-template pTemplate="emptymessage">
                        <tr>
                            <td colspan="5" class=" text-center no-results-warning">
                                Nessun risultato trovato
                            </td>
                        </tr>
                    </ng-template>

                </p-table>


            </div>
        </div>

    </ng-container>
    <div class="row">
        <div class="col mt-3">
            <button type="button" (click)="onClickAnnulla()" class="btn btn-outline-secondary btn-lg"
                aria-label="Torna indietro">INDIETRO</button>
        </div>
        <div class="col-auto mt-3">
        </div>
    </div>
</div>