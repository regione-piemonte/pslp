<!--
 * ========================LICENSE_START=================================
 * Copyright (C) 2025 Regione Piemonte
 * SPDX-FileCopyrightText: Copyright 2025 | Regione Piemonte
 * SPDX-License-Identifier: EUPL-1.2
 * =========================LICENSE_END==================================
 -->
<span class="mb-3 title">
  <h4>ISCRIZIONE AD ALBI E ORDINI PROFESSIONALI</h4>
</span>


  <!--div class="mt-3 row">
<div class="mb-5 col-sm-12 col-md-4">
  <label style="display: block" for="abilitazione">Abilitazione/Iscrizione albo professionale</label>
  <textarea pInputTextarea style="width: 25em;" formControlName="dsAbilitazione" id="abilitazione" rows="2"></textarea>
</div>
<div class="mb-5 col-sm-12 col-md-4">
  <label style="display: block" for="altreInfo">Altre informazioni</label>
  <textarea pInputTextarea style="width: 25em;" formControlName="dsAltraInformazione" id="altreInfo" rows="2"></textarea>
</div>
<div class="mb-5 col-sm-12 col-md-4">
  <label style="display: block" for="competenza">Competenza</label>
  <textarea pInputTextarea style="width: 25em;" formControlName="dsCompetenza" id="competenza" rows="2"></textarea>
</div>
</div-->

  <table *ngIf="(altreInformazioniCopy?.albi && altreInformazioniCopy?.albi?.length > 0)"
    class=" mt-3 mb-5 scrollbar-table scrollbar-primary table table-bordered table-striped table-hover table-sortable"
   >
    <thead>
      <tr>
        <th>Albi</th>
        <th>Azione</th>
      </tr>
    </thead>
    <tbody>
      <ng-container *ngIf="altreInformazioniCopy?.albi; else noData">
        <tr *ngFor="let albo of altreInformazioniCopy?.albi; index as i">
          <td>{{albo?.id?.silTAlbi?.descr}}</td>
          <td class="col-md-1">
            <a tabindex="0" (click)="onClickElimina(i)" s (keydown.enter)="onClickElimina(i)" style="color: #016CB4"
              [attr.aria-label]="'Azione: eliminare albo '+albo?.id?.silTAlbi?.descr" title="Eliminare albo">
              <i class="fas fa-trash-alt"></i>
            </a>
          </td>
        </tr>
      </ng-container>
    </tbody>
  </table>

  <ng-template #noData>
    Non ci sono dati
  </ng-template>
  <div>
    <button (click)="showForm = true" type="button" class="btn btn-primary btn-sm">INSERISCI ALBO</button>
  </div>
  <form [formGroup]="form" (ngSubmit)="onClickConferma()">
  <div *ngIf="showForm">
    <div class="mt-3 row">
      <div class="row">
        <div class="mb-5 col-sm-12 col-md-4" >
          <label for="tipoAlbo">Albo<span class="oblg">*</span></label>
          <ng-container formGroupName="lavAnagraficaAlbi">
            <ng-container formGroupName="id">
            <ng-container formGroupName="silTAlbi">
              <p-dropdown optionLabel="descr" optionValue="id" inputId="tipoAlbo"
                [emptyMessage]="'Nessun dato trovato'"
                ariaLabel="seleziona albo da aggiungere"
                [autoDisplayFirst]="false" [options]="albiFiltrati" formControlName="id"
                class=" p-form-select" placeholder="" bindLabel="descr">
              </p-dropdown>
            </ng-container>
          </ng-container>
        </ng-container>
        </div>
      </div>
      <div class="row">
        <div class="col mt-3">
          <button type="button" (click)="onClickAnnulla()" class="btn btn-outline-secondary btn-sm"
            aria-label="annulla">ANNULLA</button>
        </div>
        <div class="col-auto mt-3" >
          <button type="submit" class="btn btn-primary ml-auto btn-lg" [disabled]="!form?.valid"
            aria-label="inserisci albo">CONFERMA</button>
        </div>
      </div>
    </div>
  </div>

</form>
